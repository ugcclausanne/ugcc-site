<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UGCC Lausanne Admin</title>
  </head>
  <body>
    <div id="nc-root"></div>
    <script>
      try {
        localStorage.removeItem('netlifySiteURL');
        localStorage.removeItem('netlifySiteID');
        localStorage.removeItem('netlifyUser');
        localStorage.removeItem('gotrue.user');
      } catch (e) { /* ignore */ }
      window.CMS_MANUAL_INIT = true;
    </script>
    <script src="https://cdn.jsdelivr.net/npm/decap-cms@3.8.4/dist/decap-cms.js" defer></script>
    <script>
      window.addEventListener('DOMContentLoaded', function () {
        if (!window.CMS) return;
        // Force GitHub App backend, but load the rest from config.yml
        window.CMS.init({
          load_config_file: true,
          config: {
            backend: {
              name: 'github',
              repo: 'ugcclausanne/ugcc-site',
              branch: 'main',
              auth_type: 'app',
              app_id: 2144987
            }
          }
        });
      });
    </script>
  </body>
</html>
